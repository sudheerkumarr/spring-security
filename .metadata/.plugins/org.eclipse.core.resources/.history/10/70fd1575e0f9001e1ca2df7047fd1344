package com.example.controller;

import java.util.List;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class EmployeeController {
	
	@Autowired
	EmployeeService empService;
	
	
	// GET -  all employee details
		@GetMapping("/employee/all")
		ResponseEntity<List<Employee>> getAllEmployees() {
			List<Employee> empList = empService.getAllEmployees();
			return new ResponseEntity<>(empList, HttpStatus.OK); // 200 OK
		}

		// GET - employee by id
		@GetMapping("/employee/findById/{id}")
		ResponseEntity<Employee> getEmployeeById(@PathVariable("id") int id) throws EmployeeNotFoundException {
			// Call service method to get emp based on id
			Employee emp = empService.getEmployeeById(id);

			// return emp
			return new ResponseEntity<>(emp, HttpStatus.OK); // 200 OK
		}
		
		// POST - Employee
		@PostMapping("/employee/add")
		Employee addEmployee(@Valid @RequestBody Employee emp) {
			// Call service add method to add emp in db
			Employee newEmp = empService.addEmployee(emp);

			// return response
			return newEmp;
		}
}
